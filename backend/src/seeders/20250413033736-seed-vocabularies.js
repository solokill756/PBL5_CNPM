"use strict";

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface, Sequelize) {
    const vocabularyCount = await queryInterface.sequelize.query(
      "SELECT COUNT(*) as count FROM vocabulary",
      { type: queryInterface.sequelize.QueryTypes.SELECT }
    );

    if (vocabularyCount[0].count > 0) {
      console.log("Vocabularies table already seeded. Skipping...");
      return;
    }

    // Get topic IDs from temp table
    const topicIds = await queryInterface.sequelize.query(
      "SELECT topic_name, topic_id FROM temp_topic_ids",
      { type: queryInterface.sequelize.QueryTypes.SELECT }
    );

    console.log("Retrieved topic IDs:", topicIds);

    const topicMap = {};
    topicIds.forEach((topic) => {
      topicMap[topic.topic_name] = topic.topic_id;
    });

    console.log("Topic mapping:", topicMap);

    // Verify topics exist in vocabulary_topic table
    const existingTopics = await queryInterface.sequelize.query(
      "SELECT topic_id FROM vocabulary_topic",
      { type: queryInterface.sequelize.QueryTypes.SELECT }
    );
    console.log("Existing topics in vocabulary_topic:", existingTopics);

    const vocabularies = [
      // it-topic-01: IT cơ bản (18 terms: 8 existing + 10 new)
      {
        word: "プログラミング",
        meaning: "Lập trình",
        pronunciation: "ぷろぐらみんぐ",
        example: "プログラミングを学び始めたばかりです。||プログラミングでゲームを作りました。||プログラミングコンテストに参加しました。",
        usage: "Dùng để chỉ việc viết mã lệnh để tạo phần mềm hoặc ứng dụng, thường trong các ngôn ngữ như Python, Java.",
        example_meaning: "Tôi vừa bắt đầu học lập trình.||Tôi đã tạo một trò chơi bằng lập trình.||Tham gia cuộc thi lập trình.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T10:00:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "アルゴリズム",
        meaning: "Thuật toán",
        pronunciation: "あるごりずむ",
        example: "このアルゴリズムは効率的です。||新しいアルゴリズムを開発しました。||アルゴリズムの最適化が必要です。",
        usage: "Dùng để chỉ một tập hợp các bước hoặc quy tắc được sử dụng để giải quyết một vấn đề cụ thể trong lập trình.",
        example_meaning: "Thuật toán này rất hiệu quả.||Tôi đã phát triển một thuật toán mới.||Cần tối ưu hóa thuật toán.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T10:00:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "データベース",
        meaning: "Cơ sở dữ liệu",
        pronunciation: "でーたべーす",
        example: "データベースに接続できません。||データベースの設計が重要です。||データベースをバックアップしました。",
        usage: "Dùng để chỉ một hệ thống lưu trữ và quản lý dữ liệu có cấu trúc, thường được sử dụng trong các ứng dụng phần mềm.",
        example_meaning: "Không thể kết nối với cơ sở dữ liệu.||Thiết kế cơ sở dữ liệu rất quan trọng.||Đã sao lưu cơ sở dữ liệu.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T10:00:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "サーバー",
        meaning: "Máy chủ",
        pronunciation: "さーばー",
        example: "サーバーがダウンしています。||新しいサーバーを設置しました。||サーバーの負荷が高いです。",
        usage: "Dùng để chỉ một máy tính hoặc hệ thống cung cấp dịch vụ cho các máy tính khác trong mạng.",
        example_meaning: "Máy chủ đang gặp sự cố.||Đã lắp đặt máy chủ mới.||Tải máy chủ đang cao.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T10:00:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "ネットワーク",
        meaning: "Mạng",
        pronunciation: "ねっとわーく",
        example: "ネットワークの設定を確認してください。||ネットワーク接続が不安定です。||社内ネットワークにアクセスできません。",
        usage: "Dùng để chỉ một hệ thống các máy tính được kết nối với nhau để chia sẻ thông tin và tài nguyên.",
        example_meaning: "Vui lòng kiểm tra cài đặt mạng.||Kết nối mạng không ổn định.||Không thể truy cập mạng nội bộ.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T10:00:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "セキュリティ",
        meaning: "Bảo mật",
        pronunciation: "せきゅりてぃ",
        example: "セキュリティ対策を強化しました。||セキュリティホールを修正しました。||セキュリティソフトをインストールしました。",
        usage: "Dùng để chỉ các biện pháp bảo vệ hệ thống và dữ liệu khỏi các mối đe dọa bên ngoài.",
        example_meaning: "Đã tăng cường biện pháp bảo mật.||Đã sửa lỗi bảo mật.||Đã cài đặt phần mềm bảo mật.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T10:00:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "インターフェース",
        meaning: "Giao diện",
        pronunciation: "いんたーふぇーす",
        example: "ユーザーインターフェースを改善しました。||インターフェースのデザインが重要です。||新しいインターフェースを実装しました。",
        usage: "Dùng để chỉ phần tương tác giữa người dùng và hệ thống, hoặc giữa các thành phần của hệ thống.",
        example_meaning: "Đã cải thiện giao diện người dùng.||Thiết kế giao diện rất quan trọng.||Đã triển khai giao diện mới.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T10:00:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "バグ",
        meaning: "Lỗi",
        pronunciation: "ばぐ",
        example: "バグを修正しました。||重大なバグが見つかりました。||バグの原因を調査しています。",
        usage: "Dùng để chỉ một lỗi hoặc vấn đề trong chương trình máy tính.",
        example_meaning: "Đã sửa lỗi.||Đã tìm thấy lỗi nghiêm trọng.||Đang điều tra nguyên nhân lỗi.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T10:00:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      // New terms for it-topic-01
      {
        word: "ソフトウェア",
        meaning: "Phần mềm",
        pronunciation: "そふとうぇあ",
        example: "ソフトウェアをアップデートしました。||新しいソフトウェアをインストールします。||ソフトウェアのライセンスを確認しました。",
        usage: "Dùng để chỉ các chương trình hoặc hệ điều hành chạy trên phần cứng, như Windows hoặc ứng dụng di động.",
        example_meaning: "Đã cập nhật phần mềm.||Cài đặt phần mềm mới.||Kiểm tra giấy phép phần mềm.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T10:05:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "ハードウェア",
        meaning: "Phần cứng",
        pronunciation: "はーどうぇあ",
        example: "新しいハードウェアを導入しました。||ハードウェアの性能を比較します。||ハードウェアのメンテナンスを行いました。",
        usage: "Dùng để chỉ các thành phần vật lý của máy tính, như CPU, RAM, hoặc ổ cứng.",
        example_meaning: "Đã giới thiệu phần cứng mới.||So sánh hiệu suất phần cứng.||Bảo trì phần cứng.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T10:10:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "ファイル",
        meaning: "Tệp",
        pronunciation: "ふぁいる",
        example: "ファイルを保存しました。||ファイルを共有します。||ファイルを削除しました。",
        usage: "Dùng để chỉ đơn vị lưu trữ dữ liệu, như tài liệu Word hoặc tệp ảnh.",
        example_meaning: "Đã lưu tệp.||Chia sẻ tệp.||Xóa tệp.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T10:15:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "インターネット",
        meaning: "Internet",
        pronunciation: "いんたーねっと",
        example: "インターネットに接続しました。||インターネットで情報を検索します。||インターネットの速度をテストしました。",
        usage: "Dùng để chỉ mạng toàn cầu kết nối các thiết bị để truy cập thông tin hoặc dịch vụ.",
        example_meaning: "Đã kết nối Internet.||Tìm kiếm thông tin trên Internet.||Kiểm tra tốc độ Internet.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T10:20:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "アプリケーション",
        meaning: "Ứng dụng",
        pronunciation: "あぷりけーしょん",
        example: "新しいアプリケーションを開発しました。||アプリケーションをテストします。||アプリケーションをアップデートしました。",
        usage: "Dùng để chỉ phần mềm được thiết kế cho mục đích cụ thể, như ứng dụng di động hoặc phần mềm doanh nghiệp.",
        example_meaning: "Đã phát triển ứng dụng mới.||Kiểm tra ứng dụng.||Cập nhật ứng dụng.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T10:25:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "コード",
        meaning: "Mã",
        pronunciation: "こーど",
        example: "コードを書きました。||コードをデバッグします。||コードをレビューしました。",
        usage: "Dùng để chỉ các dòng lệnh được viết trong ngôn ngữ lập trình để thực hiện chức năng cụ thể.",
        example_meaning: "Đã viết mã.||Gỡ lỗi mã.||Xem xét mã.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T10:30:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "メモリ",
        meaning: "Bộ nhớ",
        pronunciation: "めもり",
        example: "メモリを増設しました。||メモリの使用量を監視します。||メモリリークを修正しました。",
        usage: "Dùng để chỉ nơi lưu trữ tạm thời dữ liệu trong máy tính, như RAM hoặc bộ nhớ đệm.",
        example_meaning: "Đã mở rộng bộ nhớ.||Theo dõi mức sử dụng bộ nhớ.||Sửa lỗi rò rỉ bộ nhớ.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T10:35:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "プロセッサ",
        meaning: "Bộ xử lý",
        pronunciation: "ぷろせっさ",
        example: "新しいプロセッサを搭載しました。||プロセッサの性能を比較します。||プロセッサの温度を監視しました。",
        usage: "Dùng để chỉ thành phần thực hiện các phép tính và xử lý dữ liệu trong máy tính, như CPU.",
        example_meaning: "Đã lắp bộ xử lý mới.||So sánh hiệu suất bộ xử lý.||Theo dõi nhiệt độ bộ xử lý.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T10:40:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "ストレージ",
        meaning: "Lưu trữ",
        pronunciation: "すとれーじ",
        example: "ストレージ容量を増やしました。||ストレージをバックアップします。||ストレージの速度をテストしました。",
        usage: "Dùng để chỉ nơi lưu trữ dữ liệu lâu dài, như ổ cứng hoặc SSD.",
        example_meaning: "Đã tăng dung lượng lưu trữ.||Sao lưu lưu trữ.||Kiểm tra tốc độ lưu trữ.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T10:45:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      {
        word: "コマンド",
        meaning: "Lệnh",
        pronunciation: "こまんど",
        example: "コマンドを入力して実行しました。||コマンドでファイルをコピーします。||コマンドのヘルプを参照しました。",
        usage: "Dùng để nhập các chỉ thị vào giao diện dòng lệnh để thực hiện tác vụ, như sao chép tệp hoặc chạy chương trình.",
        example_meaning: "Đã nhập lệnh để thực thi.||Sao chép tệp bằng lệnh.||Tham khảo trợ giúp lệnh.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T10:50:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
      // it-topic-02: Phát triển phần mềm (20 new terms)
      {
        word: "フレームワーク",
        meaning: "Khung công tác",
        pronunciation: "ふれーむわーく",
        example: "新しいフレームワークを採用しました。||フレームワークで開発時間を短縮しました。||フレームワークのドキュメントを参照しました。",
        usage: "Dùng để chỉ bộ công cụ và thư viện hỗ trợ phát triển phần mềm nhanh hơn, như React hoặc Django.",
        example_meaning: "Đã áp dụng khung công tác mới.||Khung công tác giúp tiết kiệm thời gian phát triển.||Tham khảo tài liệu khung công tác.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T11:00:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "バージョン管理",
        meaning: "Quản lý phiên bản",
        pronunciation: "ばーじょんかんり",
        example: "Gitでバージョン管理を行います。||バージョン管理で変更を追跡しました。||バージョン管理ツールを導入しました。",
        usage: "Dùng để theo dõi và quản lý các thay đổi trong mã nguồn, thường sử dụng công cụ như Git.",
        example_meaning: "Sử dụng Git để quản lý phiên bản.||Theo dõi thay đổi bằng quản lý phiên bản.||Giới thiệu công cụ quản lý phiên bản.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T11:05:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "リファクタリング",
        meaning: "Tái cấu trúc",
        pronunciation: "りふぁくたりんぐ",
        example: "コードのリファクタリングを行います。||リファクタリングでコードを整理しました。||リファクタリングの効果を評価しました。",
        usage: "Dùng để cải thiện cấu trúc mã mà không thay đổi chức năng, giúp mã dễ đọc và bảo trì hơn.",
        example_meaning: "Thực hiện tái cấu trúc mã.||Tái cấu trúc giúp mã gọn gàng hơn.||Đánh giá hiệu quả của tái cấu trúc.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T11:10:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "デプロイ",
        meaning: "Triển khai",
        pronunciation: "でぷろい",
        example: "新しいバージョンをデプロイします。||本番環境にデプロイしました。||デプロイのスケジュールを計画しました。",
        usage: "Dùng để chỉ việc đưa phần mềm hoặc phiên bản mới vào môi trường sản xuất để sử dụng.",
        example_meaning: "Triển khai phiên bản mới.||Đã triển khai lên môi trường sản xuất.||Lập kế hoạch triển khai.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T11:15:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "ログ",
        meaning: "Nhật ký (Log)",
        pronunciation: "ろぐ",
        example: "エラーログを確認します。||ログを分析して問題を特定しました。||ログの保存期間を設定しました。",
        usage: "Dùng để ghi lại các sự kiện hoặc lỗi trong hệ thống, giúp phân tích và khắc phục sự cố.",
        example_meaning: "Kiểm tra nhật ký lỗi.||Phân tích nhật ký để xác định vấn đề.||Đặt thời gian lưu trữ nhật ký.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T11:20:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "モジュール",
        meaning: "Mô-đun",
        pronunciation: "もじゅーる",
        example: "新しいモジュールを追加しました。||モジュールを再利用して効率化しました。||モジュールのテストを行いました。",
        usage: "Dùng để chỉ các thành phần mã độc lập, có thể tái sử dụng trong nhiều phần của phần mềm.",
        example_meaning: "Thêm một mô-đun mới.||Tái sử dụng mô-đun để tăng hiệu quả.||Kiểm tra mô-đun.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T11:25:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "ライブラリ",
        meaning: "Thư viện",
        pronunciation: "らいぶらり",
        example: "外部ライブラリをインポートします。||ライブラリを更新して機能を追加しました。||ライブラリの依存関係を管理しました。",
        usage: "Dùng để chỉ tập hợp mã được viết sẵn, giúp tiết kiệm thời gian phát triển, như thư viện numpy.",
        example_meaning: "Nhập thư viện bên ngoài.||Cập nhật thư viện để thêm chức năng.||Quản lý phụ thuộc thư viện.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T11:30:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "コンパイル",
        meaning: "Biên dịch",
        pronunciation: "こんぱいる",
        example: "コードをコンパイルして実行します。||コンパイルエラーを修正しました。||コンパイル時間を短縮しました。",
        usage: "Dùng để chuyển mã nguồn thành mã máy để máy tính thực thi, thường với ngôn ngữ như C++.",
        example_meaning: "Biên dịch và chạy mã.||Sửa lỗi biên dịch.||Rút ngắn thời gian biên dịch.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T11:35:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "アーキテクチャ",
        meaning: "Kiến trúc",
        pronunciation: "あーきてくちゃ",
        example: "システムのアーキテクチャを設計します。||アーキテクチャを最適化しました。||アーキテクチャのドキュメントを作成しました。",
        usage: "Dùng để chỉ cấu trúc tổng thể của hệ thống, bao gồm cách các thành phần tương tác với nhau.",
        example_meaning: "Thiết kế kiến trúc hệ thống.||Tối ưu hóa kiến trúc.||Tạo tài liệu kiến trúc.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T11:40:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "コードレビュー",
        meaning: "Xem xét mã",
        pronunciation: "こーどれびゅー",
        example: "コードレビューを行います。||コードレビューで問題を指摘しました。||コードレビューを効率化しました。",
        usage: "Dùng để kiểm tra mã nguồn bởi các lập trình viên khác nhằm đảm bảo chất lượng và phát hiện lỗi.",
        example_meaning: "Thực hiện xem xét mã.||Chỉ ra vấn đề trong xem xét mã.||Tăng hiệu quả xem xét mã.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T11:45:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "テストケース",
        meaning: "Trường hợp kiểm thử",
        pronunciation: "てすとけーす",
        example: "テストケースを作成します。||テストケースを実行して結果を確認しました。||テストケースを自動化しました。",
        usage: "Dùng để định nghĩa các tình huống cụ thể nhằm kiểm tra chức năng của phần mềm.",
        example_meaning: "Tạo trường hợp kiểm thử.||Thực hiện trường hợp kiểm thử và kiểm tra kết quả.||Tự động hóa trường hợp kiểm thử.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T11:50:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "リグレッション",
        meaning: "Kiểm thử hồi quy",
        pronunciation: "りぐれっしょん",
        example: "リグレッションテストを実施します。||リグレッションで既存機能を確認しました。||リグレッションテストを自動化しました。",
        usage: "Dùng để kiểm tra lại toàn bộ hệ thống sau khi cập nhật để đảm bảo các chức năng cũ vẫn hoạt động.",
        example_meaning: "Thực hiện kiểm thử hồi quy.||Kiểm tra chức năng hiện có bằng kiểm thử hồi quy.||Tự động hóa kiểm thử hồi quy.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T11:55:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "フロントエンド",
        meaning: "Giao diện người dùng (Frontend)",
        pronunciation: "ふろんとえんど",
        example: "フロントエンドを開発します。||フロントエンドのUIを改善しました。||フロントエンドのテストを行いました。",
        usage: "Dùng để chỉ phần phát triển giao diện và trải nghiệm người dùng, thường sử dụng HTML, CSS, JavaScript.",
        example_meaning: "Phát triển giao diện người dùng.||Cải thiện giao diện người dùng của frontend.||Kiểm tra frontend.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T12:00:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "バックエンド",
        meaning: "Hậu kỳ (Backend)",
        pronunciation: "ばっくえんど",
        example: "バックエンドのロジックを実装します。||バックエンドでデータを処理しました。||バックエンドの性能を最適化しました。",
        usage: "Dùng để chỉ phần xử lý logic, dữ liệu và máy chủ của ứng dụng, thường sử dụng Python, Java.",
        example_meaning: "Triển khai logic hậu kỳ.||Xử lý dữ liệu ở backend.||Tối ưu hóa hiệu suất backend.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T12:05:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "フルスタック",
        meaning: "Toàn diện (Full-stack)",
        pronunciation: "ふるすたっく",
        example: "フルスタック開発者として働きます。||フルスタックでプロジェクトを担当しました。||フルスタックで効率的に開発しました。",
        usage: "Dùng để chỉ lập trình viên phát triển cả frontend và backend của một ứng dụng.",
        example_meaning: "Làm việc như một lập trình viên toàn diện.||Phụ trách dự án với vai trò full-stack.||Phát triển hiệu quả với full-stack.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T12:10:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "アジャイル",
        meaning: "Linh hoạt (Agile)",
        pronunciation: "あじゃいる",
        example: "アジャイル開発を導入しました。||アジャイルで迅速な開発を行っています。||アジャイルのワークショップに参加しました。",
        usage: "Dùng để chỉ phương pháp phát triển phần mềm theo từng giai đoạn ngắn, linh hoạt với thay đổi.",
        example_meaning: "Đã áp dụng phát triển linh hoạt.||Thực hiện phát triển nhanh với Agile.||Tham gia hội thảo Agile.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T12:15:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "スクラム",
        meaning: "Scrum",
        pronunciation: "すくらむ",
        example: "スクラムミーティングを開催します。||スクラムでチームの進捗を確認しました。||スクラムのトレーニングを受けました。",
        usage: "Dùng để chỉ một phương pháp Agile, tổ chức công việc theo các sprint ngắn với họp định kỳ.",
        example_meaning: "Tổ chức cuộc họp Scrum.||Kiểm tra tiến độ đội với Scrum.||Tham gia khóa đào tạo Scrum.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T12:20:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "スプリント",
        meaning: "Sprint",
        pronunciation: "すぷりんと",
        example: "スプリントの計画を立てます。||スプリントで新機能を完成させました。||スプリントのレビューを行いました。",
        usage: "Dùng để chỉ giai đoạn ngắn (thường 2-4 tuần) trong Scrum để hoàn thành một phần công việc.",
        example_meaning: "Lập kế hoạch cho sprint.||Hoàn thành tính năng mới trong sprint.||Thực hiện đánh giá sprint.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T12:25:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "バックログ",
        meaning: "Danh sách công việc tồn đọng",
        pronunciation: "ばっくろぐ",
        example: "バックログを整理します。||バックログからタスクを割り当てました。||バックログの優先順位を決めました。",
        usage: "Dùng để liệt kê các nhiệm vụ hoặc tính năng cần phát triển, được ưu tiên theo giá trị.",
        example_meaning: "Sắp xếp danh sách công việc tồn đọng.||Phân công nhiệm vụ từ backlog.||Quyết định ưu tiên backlog.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T12:30:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      {
        word: "リポジトリ",
        meaning: "Kho lưu trữ",
        pronunciation: "りぽじとり",
        example: "コードをリポジトリにプッシュします。||リポジトリからコードをクローンしました。||リポジトリのアクセス権を設定しました。",
        usage: "Dùng để chỉ nơi lưu trữ mã nguồn, thường được quản lý bằng Git hoặc GitHub.",
        example_meaning: "Đẩy mã lên kho lưu trữ.||Sao chép mã từ kho lưu trữ.||Thiết lập quyền truy cập kho lưu trữ.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T12:35:00"),
        language: "ja",
        topic_id: topicMap["it-topic-02"],
      },
      // it-topic-03: Mạng & bảo mật (10 new terms)
      {
        word: "クラウド",
        meaning: "Đám mây",
        pronunciation: "くらうど",
        example: "クラウドサービスを利用しています。||クラウドにデータを保存しました。||クラウドのコストを最適化しました。",
        usage: "Dùng để chỉ dịch vụ lưu trữ và xử lý dữ liệu qua Internet, như AWS hoặc Google Cloud.",
        example_meaning: "Sử dụng dịch vụ đám mây.||Lưu dữ liệu trên đám mây.||Tối ưu hóa chi phí đám mây.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T13:00:00"),
        language: "ja",
        topic_id: topicMap["it-topic-03"],
      },
      {
        word: "クライアント",
        meaning: "Máy khách",
        pronunciation: "くらいあんと",
        example: "クライアントからデータを取得します。||クライアントの接続を管理しました。||クライアントソフトを更新しました。",
        usage: "Dùng để chỉ thiết bị hoặc phần mềm truy cập dịch vụ từ máy chủ.",
        example_meaning: "Lấy dữ liệu từ máy khách.||Quản lý kết nối của máy khách.||Cập nhật phần mềm máy khách.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T13:05:00"),
        language: "ja",
        topic_id: topicMap["it-topic-03"],
      },
      {
        word: "プロトコル",
        meaning: "Giao thức",
        pronunciation: "ぷろとこる",
        example: "HTTPプロトコルを使用します。||新しいプロトコルを導入しました。||プロトコルのエラーを調査しました。",
        usage: "Dùng để chỉ quy tắc hoặc chuẩn giao tiếp giữa các thiết bị trong mạng, như TCP/IP.",
        example_meaning: "Sử dụng giao thức HTTP.||Giới thiệu giao thức mới.||Điều tra lỗi giao thức.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T13:10:00"),
        language: "ja",
        topic_id: topicMap["it-topic-03"],
      },
      {
        word: "ファイアウォール",
        meaning: "Tường lửa",
        pronunciation: "ふぁいあうぉーる",
        example: "ファイアウォールを設定しました。||ファイアウォールで不正アクセスをブロックしました。||ファイアウォールのログを分析しました。",
        usage: "Dùng để chỉ hệ thống bảo mật ngăn chặn truy cập trái phép vào mạng.",
        example_meaning: "Thiết lập tường lửa.||Chặn truy cập trái phép bằng tường lửa.||Phân tích nhật ký tường lửa.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T13:15:00"),
        language: "ja",
        topic_id: topicMap["it-topic-03"],
      },
      {
        word: "暗号化",
        meaning: "Mã hóa",
        pronunciation: "あんごうか",
        example: "データを暗号化しました。||暗号化キーを管理します。||暗号化アルゴリズムを更新しました。",
        usage: "Dùng để bảo vệ dữ liệu bằng cách chuyển đổi thành dạng không thể đọc được nếu không có khóa.",
        example_meaning: "Mã hóa dữ liệu.||Quản lý khóa mã hóa.||Cập nhật thuật toán mã hóa.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T13:20:00"),
        language: "ja",
        topic_id: topicMap["it-topic-03"],
      },
      {
        word: "認証",
        meaning: "Xác thực",
        pronunciation: "にんしょう",
        example: "ユーザー認証を行いました。||二要素認証を導入しました。||認証エラーを調査しました。",
        usage: "Dùng để xác minh danh tính của người dùng hoặc thiết bị trước khi cấp quyền truy cập.",
        example_meaning: "Xác thực người dùng.||Áp dụng xác thực hai yếu tố.||Điều tra lỗi xác thực.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T13:25:00"),
        language: "ja",
        topic_id: topicMap["it-topic-03"],
      },
      {
        word: "脆弱性",
        meaning: "Lỗ hổng",
        pronunciation: "ぜいじゃくせい",
        example: "脆弱性を発見しました。||脆弱性を修正するパッチを適用しました。||脆弱性スキャンを実施しました。",
        usage: "Dùng để chỉ điểm yếu trong hệ thống có thể bị khai thác để tấn công.",
        example_meaning: "Phát hiện lỗ hổng.||Áp dụng bản vá để sửa lỗ hổng.||Thực hiện quét lỗ hổng.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T13:30:00"),
        language: "ja",
        topic_id: topicMap["it-topic-03"],
      },
      {
        word: "マルウェア",
        meaning: "Phần mềm độc hại",
        pronunciation: "まるうぇあ",
        example: "マルウェアを検出しました。||マルウェアを削除しました。||マルウェア対策ソフトを導入しました。",
        usage: "Dùng để chỉ phần mềm được thiết kế để gây hại, như virus hoặc ransomware.",
        example_meaning: "Phát hiện phần mềm độc hại.||Xóa phần mềm độc hại.||Cài đặt phần mềm chống malware.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T13:35:00"),
        language: "ja",
        topic_id: topicMap["it-topic-03"],
      },
      {
        word: "VPN",
        meaning: "Mạng riêng ảo",
        pronunciation: "ぶいぴーえぬ",
        example: "VPNを使用して安全に接続しました。||VPNを設定しました。||VPNの速度をテストしました。",
        usage: "Dùng để tạo kết nối an toàn qua Internet, thường để truy cập mạng công ty từ xa.",
        example_meaning: "Kết nối an toàn bằng VPN.||Thiết lập VPN.||Kiểm tra tốc độ VPN.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T13:40:00"),
        language: "ja",
        topic_id: topicMap["it-topic-03"],
      },
      {
        word: "ルーター",
        meaning: "Bộ định tuyến",
        pronunciation: "るーたー",
        example: "ルーターを設定しました。||ルーターを再起動しました。||ルーターのファームウェアを更新しました。",
        usage: "Dùng để chỉ thiết bị chuyển tiếp dữ liệu giữa các mạng, như mạng nội bộ và Internet.",
        example_meaning: "Thiết lập bộ định tuyến.||Khởi động lại bộ định tuyến.||Cập nhật phần mềm bộ định tuyến.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T13:45:00"),
        language: "ja",
        topic_id: topicMap["it-topic-03"],
      },
      // it-topic-04: Cơ sở dữ liệu (10 new terms)
      {
        word: "テーブル",
        meaning: "Bảng",
        pronunciation: "てーぶる",
        example: "新しいテーブルを作成しました。||テーブルを結合しました。||テーブルのデータを更新しました。",
        usage: "Dùng để chỉ cấu trúc lưu trữ dữ liệu trong cơ sở dữ liệu, gồm các cột và hàng.",
        example_meaning: "Tạo bảng mới.||Kết hợp các bảng.||Cập nhật dữ liệu bảng.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T14:00:00"),
        language: "ja",
        topic_id: topicMap["it-topic-04"],
      },
      {
        word: "クエリ",
        meaning: "Truy vấn",
        pronunciation: "くえり",
        example: "クエリを実行しました。||クエリを最適化しました。||クエリの結果を分析しました。",
        usage: "Dùng để chỉ lệnh lấy, thêm, sửa hoặc xóa dữ liệu trong cơ sở dữ liệu, thường bằng SQL.",
        example_meaning: "Thực thi truy vấn.||Tối ưu hóa truy vấn.||Phân tích kết quả truy vấn.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T14:05:00"),
        language: "ja",
        topic_id: topicMap["it-topic-04"],
      },
      {
        word: "インデックス",
        meaning: "Chỉ mục",
        pronunciation: "いんでっくす",
        example: "インデックスを作成しました。||インデックスを再構築しました。||インデックスで検索速度を向上させました。",
        usage: "Dùng để tăng tốc độ truy vấn bằng cách tạo cấu trúc tham chiếu cho dữ liệu.",
        example_meaning: "Tạo chỉ mục.||Tái xây dựng chỉ mục.||Cải thiện tốc độ tìm kiếm bằng chỉ mục.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T14:10:00"),
        language: "ja",
        topic_id: topicMap["it-topic-04"],
      },
      {
        word: "主キー",
        meaning: "Khóa chính",
        pronunciation: "しゅきー",
        example: "主キーを設定しました。||主キーの一意性を確認しました。||主キーを変更しました。",
        usage: "Dùng để chỉ trường duy nhất xác định mỗi bản ghi trong bảng cơ sở dữ liệu.",
        example_meaning: "Thiết lập khóa chính.||Kiểm tra tính duy nhất của khóa chính.||Thay đổi khóa chính.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T14:15:00"),
        language: "ja",
        topic_id: topicMap["it-topic-04"],
      },
      {
        word: "外部キー",
        meaning: "Khóa ngoại",
        pronunciation: "がいぶきー",
        example: "外部キーを定義しました。||外部キーの制約を追加しました。||外部キーを削除しました。",
        usage: "Dùng để liên kết hai bảng trong cơ sở dữ liệu, đảm bảo tính toàn vẹn tham chiếu.",
        example_meaning: "Xác định khóa ngoại.||Thêm ràng buộc khóa ngoại.||Xóa khóa ngoại.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T14:20:00"),
        language: "ja",
        topic_id: topicMap["it-topic-04"],
      },
      {
        word: "トランザクション",
        meaning: "Giao dịch",
        pronunciation: "とらんざくしょん",
        example: "トランザクションを開始しました。||トランザクションをロールバックしました。||トランザクションをコミットしました。",
        usage: "Dùng để chỉ tập hợp các thao tác cơ sở dữ liệu được thực hiện như một đơn vị, đảm bảo tính nhất quán.",
        example_meaning: "Bắt đầu giao dịch.||Hoàn tác giao dịch.||Xác nhận giao dịch.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T14:25:00"),
        language: "ja",
        topic_id: topicMap["it-topic-04"],
      },
      {
        word: "正規化",
        meaning: "Chuẩn hóa",
        pronunciation: "せいきか",
        example: "データベースを正規化しました。||正規化で冗長性を削減しました。||正規化のレベルを評価しました。",
        usage: "Dùng để tổ chức dữ liệu nhằm loại bỏ dư thừa và đảm bảo tính toàn vẹn dữ liệu.",
        example_meaning: "Chuẩn hóa cơ sở dữ liệu.||Giảm dư thừa bằng chuẩn hóa.||Đánh giá mức độ chuẩn hóa.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T14:30:00"),
        language: "ja",
        topic_id: topicMap["it-topic-04"],
      },
      {
        word: "バックアップ",
        meaning: "Sao lưu",
        pronunciation: "ばっくあっぷ",
        example: "データベースをバックアップしました。||定期的なバックアップを設定しました。||バックアップからデータを復元しました。",
        usage: "Dùng để sao chép cơ sở dữ liệu nhằm bảo vệ dữ liệu khỏi mất mát hoặc hỏng hóc.",
        example_meaning: "Sao lưu cơ sở dữ liệu.||Thiết lập sao lưu định kỳ.||Khôi phục dữ liệu từ bản sao lưu.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T14:35:00"),
        language: "ja",
        topic_id: topicMap["it-topic-04"],
      },
      {
        word: "リカバリ",
        meaning: "Khôi phục",
        pronunciation: "りかばり",
        example: "データベースをリカバリしました。||リカバリ計画を作成しました。||リカバリテストを実施しました。",
        usage: "Dùng để chỉ quá trình khôi phục cơ sở dữ liệu sau sự cố, như từ bản sao lưu.",
        example_meaning: "Khôi phục cơ sở dữ liệu.||Lập kế hoạch khôi phục.||Thực hiện kiểm tra khôi phục.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T14:40:00"),
        language: "ja",
        topic_id: topicMap["it-topic-04"],
      },
      {
        word: "レプリケーション",
        meaning: "Sao chép",
        pronunciation: "れぷりけーしょん",
        example: "データベースをレプリケーションしました。||レプリケーションの同期を確認しました。||レプリケーションを設定しました。",
        usage: "Dùng để sao chép dữ liệu từ một cơ sở dữ liệu sang cơ sở dữ liệu khác để tăng tính sẵn sàng.",
        example_meaning: "Sao chép cơ sở dữ liệu.||Kiểm tra đồng bộ hóa sao chép.||Thiết lập sao chép.",
        ai_suggested: true,
        created_at: new Date("2025-04-01T14:45:00"),
        language: "ja",
        topic_id: topicMap["it-topic-04"],
      },
      // Fixed incomplete entry (original "デバッグ")
      {
        word: "デバッグ",
        meaning: "Gỡ lỗi",
        pronunciation: "でばっぐ",
        example: "デバッグ作業を開始しました。||デバッグツールを使用しています。||デバッグが完了しました。",
        usage: "Dùng để chỉ quá trình tìm và sửa lỗi trong chương trình máy tính.",
        example_meaning: "Bắt đầu gỡ lỗi.||Sử dụng công cụ gỡ lỗi.||Hoàn thành gỡ lỗi.",
        ai_suggested: false,
        created_at: new Date("2025-04-01T10:55:00"),
        language: "ja",
        topic_id: topicMap["it-topic-01"],
      },
    ];

    // Generate UUIDs for all vocabularies
    for (let vocab of vocabularies) {
      const result = await queryInterface.sequelize.query("SELECT UUID() as id", {
        type: queryInterface.sequelize.QueryTypes.SELECT,
      });
      vocab.vocab_id = result[0].id;
    }

    // Log first vocabulary entry for debugging
    console.log("First vocabulary entry:", vocabularies[0]);

    try {
      await queryInterface.bulkInsert("vocabulary", vocabularies, { validate: true });
      console.log("Vocabularies seeded successfully!");
    } catch (error) {
      console.error("Error seeding vocabularies:", error);
      throw error;
    }
  },

  async down(queryInterface, Sequelize) {
    await queryInterface.bulkDelete("vocabulary", null, {});
  },
};